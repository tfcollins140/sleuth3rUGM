#! /usr/bin/perl

## Informal program to list the functions included in each module.
##
## D. Donato -- April 5, 2006

## Obtain an array of the names of all C source-code files.

$CountMemFuncs = 0;
@filelist1 = glob("*.c");

print "This output was generated by Perl program \"xlist_functions\"\n";
print "            at  ".localtime()."     \n";
print "-------------------------------------------------------------\n\n\n";
print "The SLEUTH modules are:\n";
print "=======================\n\n";

foreach $namev (@filelist1)
 {
  print "--> ".$namev."\n";
 }

## Loop through each source-code file listing the function name
## and purpose.

print "\n\n\n\n=======================\n\n";
print "The member functions for each module are listed below:\n\n";

foreach $fnamev (@filelist1)
  {
   print "\n\n\n\n\n---> MODULE NAME:     $fnamev  <---\n";
   print "==============================================\n\n\n";
   open($fp, $fnamev);
   while ($inpline = <$fp>)
        {
         if (substr($inpline, 0, 17) eq "** FUNCTION NAME:") {print $inpline; $CountMemFuncs++;}
         if (substr($inpline, 0, 17) eq "** PURPOSE:      ") {print $inpline; print "\n";}
        }
  }

print "\n\n***** The number of member functions listed was: $CountMemFuncs .\n\n\n";

exit(0);
